<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QuaZip: QuaZip FAQ</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QuaZip<span id="projectnumber">&#160;quazip-1-4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">QuaZip FAQ </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="faq-QuaZip-name"></a><b>Q. QuaZIP, QuaZip, Quazip, quazip... what's with these names?</b></p>
<p>In QuaZIP 0.x, there was this rule that QuaZIP is the library name, while QuaZip is a class in this library. Since QuaZip 1.0, it's now obsolete, and both are QuaZip now to avoid confusion. The lowercase version is used in places where lowercase is the convention, such as some file names. Quazip is not used anywhere except maybe by mistake.</p>
<p>One reason using QuaZIP actually made some sense is that Doxygen (used to generate this documentation) is very insistent on linking every mention of a class name to its documentation, meaning every QuaZip became <a class="el" href="classQuaZip.html" title="ZIP archive.">QuaZip</a> (linked to the <a class="el" href="classQuaZip.html" title="ZIP archive.">QuaZip</a> class docs). This can be avoided by proper escaping, but it's pretty annoying to do it every time. Too bad I realized it <em>after</em> I'd renamed QuaZIP to QuaZip, so if you see too many links to the <a class="el" href="classQuaZip.html" title="ZIP archive.">QuaZip</a> class in places where they don't belong, well... you now know the reason.</p>
<p><a class="anchor" id="faq-non-QIODevice"></a><b>Q. Is there any way to use <a class="el" href="classQuaZipFile.html" title="A file inside ZIP archive.">QuaZipFile</a> in <a class="elRef" href="http://doc.qt.io/qt-5.12/qt.html">Qt</a> where you are supposed to use normal (non-zipped) file, but not through <a class="elRef" href="http://doc.qt.io/qt-5.12/qiodevice.html">QIODevice</a> API?</b></p>
<p>A. Usually not. For example, if you are passing file name to some database driver (like SQLite), <a class="elRef" href="http://doc.qt.io/qt-5.12/qt.html">Qt</a> usually just passes this name down to the 3rd-party library, which is usually does not know anything about <a class="elRef" href="http://doc.qt.io/qt-5.12/qiodevice.html">QIODevice</a> and therefore there is no way to pass <a class="el" href="classQuaZipFile.html" title="A file inside ZIP archive.">QuaZipFile</a> as a normal file. However, if we are talking about some place where you pass file name, and then internally use <a class="elRef" href="http://doc.qt.io/qt-5.12/qfile.html">QFile</a> to open it, then it is a good idea to make an overloaded method, which accepts a <a class="elRef" href="http://doc.qt.io/qt-5.12/qiodevice.html">QIODevice</a> pointer. Then you would be able to pass <a class="el" href="classQuaZipFile.html" title="A file inside ZIP archive.">QuaZipFile</a> as well as many other nice things such as <a class="elRef" href="http://doc.qt.io/qt-5.12/qbuffer.html">QBuffer</a> or <a class="elRef" href="http://doc.qt.io/qt-5.12/qprocess.html">QProcess</a>. Of course, that's only possible if you have control over the sources of the particular class.</p>
<p><a class="anchor" id="faq-zip64"></a><b>Q. Can QuaZip handle files larger than 4GB? What about zip64 standard?</b></p>
<p>A. Starting with version 0.6, QuaZip uses Minizip 1.1 with zip64 support which should handle large files perfectly. The zip64 support in Minizip looks like it's not 100% conforming to the standard, but 3rd party tools seem to have no problem with the resulting archives.</p>
<p><a class="anchor" id="faq-seekable"></a><b>Q. Can QuaZip write archives to a sequential <a class="elRef" href="http://doc.qt.io/qt-5.12/qiodevice.html">QIODevice</a> like QTcpSocket?</b></p>
<p>A. Writing is possible since QuaZip v0.7. It's only possible in mdCreate mode, no mdAppend support. Reading is not supported either.</p>
<p><a class="anchor" id="faq-Minizip-update"></a><b>Q. Can I use another version of Minizip in QuaZip, not the bundled one?</b></p>
<p>A. No, unfortunately not. To support reading/writing ZIP archives from/to <a class="elRef" href="http://doc.qt.io/qt-5.12/qiodevice.html">QIODevice</a> objects, some modifications were needed to Minizip. Now that there is a Minizip fork on GitHub, it is theoretically possible to backport these modifications into Minizip in a backward-compatible manner to ensure seamless integration with QuaZip, but it hasn't been done yet, and there are no short-term plans, only a long-term goal.</p>
<p><a class="anchor" id="faq-thread-safe"></a><b>Q. Is QuaZip thread safe? Reentrant?</b></p>
<p>A. This is actually two questions: is Minizip thread safe or reentrant, and is QuaZip thread safe or reentrant?</p>
<p>The answer is that Minizip and QuaZip are mostly just regular I/O libraries using some data structures to store the current I/O state. This means that most of the library is reentrant, but not thread-safe, as is the usual case with most regular libraries. That is, using different unrelated instances of the same class is mostly safe. “Unrelated” means that <a class="el" href="classQuaZip.html" title="ZIP archive.">QuaZip</a> / <a class="el" href="classQuaZipFile.html" title="A file inside ZIP archive.">QuaZipFile</a> pairs should be treated as single objects as they are tightly coupled together (and should have been a single class in the first place).</p>
<p>Since it's an I/O library, to achieve reentrancy it is required to avoid OS-level conflicts. This means that concurrent writing to the same ZIP file is impossible, no matter how careful you are with class instances. Concurrent reading using different instances is possible.</p>
<p>An attentive reader would probably notice by this point all these “mostly safe”, “mostly regular libraries”. This is, of course, about static (global) variables. QuaZip has just a few, and they are only available through obviously named static setters, like <a class="el" href="classQuaZip.html#aa913f4539ec45b392f3dc43e4919c9a1" title="Sets default OS code.">QuaZip::setDefaultOsCode()</a> and <a class="el" href="classQuaZip.html#a317f5db89d84a80417338a3ab89770da" title="Sets the default file name codec to use.">QuaZip::setDefaultFileNameCodec()</a>. If you need to use these, be sure to call them before starting any other threads.</p>
<p>As far as Minizip goes, it is mostly safe I/O library, but the crypting part contains some code that is definitely not thread safe, namely srand() and rand() (not even rand_r()) calls. This code is used for encryption only, so decryption is safe. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jan 22 2023 22:03:11 for QuaZip by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
